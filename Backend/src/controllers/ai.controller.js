const generateContent = require("../services/ai.service");

module.exports.getReview = async (req, res) => {
    const { code } = req.body;

    // Ensure 'code' is provided in the request body
    if (!code) {
        return res.status(400).json({ message: "Code is required" });
    }

    try {
        // Call generateContent to process the code review
        const review = await generateContent(code);

        // Send a success response with the review content
        return res.status(200).json({
            message: 'Review processed successfully',
            review: review, // The content generated by AI
        });
    } catch (error) {
        // If an error occurs, send a failure response with the error message
        console.error("Error during AI review:", error);
        return res.status(500).json({
            message: 'An error occurred while processing the review',
            error: error.message,
        });
    }
};


